stages:
  - deploy

deploy_cloudformation:
  stage: deploy
  image: amazon/aws-cli:2.x  # Use an AWS CLI Docker image
  script:
    - aws configure set aws_access_key_id $AWS_ACCESS_KEY_ID
    - aws configure set aws_secret_access_key $AWS_SECRET_ACCESS_KEY
    - aws configure set region us-east-1  # Set your desired AWS region
    - aws cloudformation deploy \
        --stack-name YourStackName \
        --template-file path/to/your/template.yml \
        --capabilities CAPABILITY_IAM
  only:
    - master  # Define the branch to trigger deployments (e.g., master branch)
