image: lmregistry.us.lmco.com/lmc.eo.swf.lmified/ext.hub.docker.com/bitnami/aws-cli:latest

stages:
  - validate
  - deploy

##### Validate #####

validate:
    stage: validate
    script:
     - aws cloudformation validate-template --template-body file://strapi-cf.yml

##### Deploy #####

deploy:
  stage: deploy
  variables:
    stackname: strapi-cf.yml
  script:
    - aws cloudformation deploy --template-file ./strapi-cf.yml --parameter-overrides file://parameters.json --stack-name $stackName


